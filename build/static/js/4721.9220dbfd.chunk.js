"use strict";(self.webpackChunk_coreui_AmarSystem=self.webpackChunk_coreui_AmarSystem||[]).push([[4721],{24721:(e,s,a)=>{a.r(s),a.d(s,{default:()=>k});var r=a(3550),t=a(85961),l=a(3354),c=a(3526),n=a(44101),o=a(44227),i=a(94590),d=a(80861),m=a(96105),x=a(81917),h=a(85504),p=a(30347),j=a(10825),u=a(25917),y=a(84709),g=a(57919),N=a(97929),f=a(83910),S=a(65043),b=a(35475),w=a(76547),v=a(70579);const k=()=>{const[e,s]=(0,S.useState)(""),[a,k]=(0,S.useState)(""),[C,A]=(0,S.useState)(""),[I,O]=(0,S.useState)(!1),[T,_]=(0,S.useState)(!1);(0,w.k)();return(0,v.jsx)("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:(0,v.jsx)(c.T,{children:(0,v.jsx)(n.s,{className:"justify-content-center",children:(0,v.jsx)(o.U,{md:8,children:(0,v.jsxs)(i.x,{children:[(0,v.jsx)(d.E,{className:"p-4",children:(0,v.jsx)(m.W,{children:(0,v.jsxs)(x.q,{onSubmit:async s=>{s.preventDefault();try{if(!e||!a)return void A("\u0425\u044d\u0440\u044d\u0433\u043b\u044d\u0433\u0447\u0438\u0439\u043d \u043d\u044d\u0440 \u0431\u043e\u043b\u043e\u043d \u043d\u0443\u0443\u0446 \u04af\u0433\u044d\u044d \u043e\u0440\u0443\u0443\u043b\u043d\u0430 \u0443\u0443");_(!0);const s=new Headers;console.log(s),s.append("Content-Type","application/json"),console.log(s);const r={method:"POST",headers:s,body:JSON.stringify({username:e,password:a})},t=await fetch("https://api.majorsoft.mn/api/login",r),l=await t.json();if(console.log(l),t.ok)if(l.isOK){const e=JSON.parse(l.json);console.log(e);const s=e.expiresIn;localStorage.setItem("token",e.accessToken),localStorage.setItem("user-info",e.userId),localStorage.setItem("expiryDate",s),localStorage.setItem("isAuthenticated",!0),window.location.href="/"}else A(l.message);else A(l.message)}catch(r){_(!1),A(r.message)}},children:[(0,v.jsx)("h2",{children:"\u041d\u044d\u0432\u0442\u0440\u044d\u0445"}),(0,v.jsx)("p",{className:"text-body-secondary",children:"\u0422\u0430 \u04e9\u04e9\u0440\u0438\u0439\u043d \u0431\u04af\u0440\u0442\u0433\u044d\u043b\u0442\u044d\u0439 \u0445\u0430\u044f\u0433\u0430\u0430\u0440 \u043d\u044d\u0432\u0442\u0440\u044d\u043d\u044d \u04af\u04af"}),(0,v.jsxs)(h.B,{className:"mb-3",children:[(0,v.jsx)(p.s,{children:(0,v.jsx)(l.Ay,{icon:r.o})}),(0,v.jsx)(j.O,{type:"username",placeholder:"\u0425\u044d\u0440\u044d\u0433\u043b\u044d\u0433\u0447\u0438\u0439\u043d \u043d\u044d\u0440",autoComplete:"username",value:e,onChange:e=>s(e.target.value)})]}),(0,v.jsxs)(h.B,{className:"mb-4",children:[(0,v.jsx)(p.s,{children:(0,v.jsx)(l.Ay,{icon:t.q})}),(0,v.jsx)(j.O,{type:I?"text":"password",placeholder:"\u041d\u0443\u0443\u0446 \u04af\u0433",autoComplete:"current-password",value:a,onChange:e=>k(e.target.value)}),(0,v.jsx)(p.s,{type:"button",onClick:()=>{O(!I)},children:(0,v.jsx)(f.g,{icon:I?N.k6j:N.pS3})})]}),C&&(0,v.jsx)(u.k,{color:"danger",dismissible:!0,onClose:()=>A(""),children:C}),(0,v.jsxs)(n.s,{children:[(0,v.jsxs)(o.U,{xs:6,children:[!T&&(0,v.jsx)(y.Q,{type:"submit",color:"primary",className:"px-4",children:"\u041d\u044d\u0432\u0442\u0440\u044d\u0445"}),T&&(0,v.jsxs)(y.Q,{type:"submit",color:"primary",className:"px-4",children:[(0,v.jsx)(g.J,{className:"text-center"}),"...."]})]}),(0,v.jsx)(o.U,{xs:6,className:"text-right",children:(0,v.jsx)(b.N_,{to:"/reset-password",children:(0,v.jsx)(y.Q,{color:"link",className:"px-0",children:"\u041d\u0443\u0443\u0446 \u04af\u0433 \u043c\u0430\u0440\u0442\u0441\u0430\u043d"})})})]})]})})}),(0,v.jsx)(d.E,{className:"text-white bg-primary py-5",children:(0,v.jsx)(m.W,{className:"text-center",children:(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{children:"\u0411\u04af\u0440\u0442\u0433\u04af\u04af\u043b\u044d\u0445"}),(0,v.jsx)("p",{children:"\u0411\u0438\u0437\u043d\u0435\u0441\u044d\u044d \u0443\u0445\u0430\u0430\u043b\u0433\u0430\u0430\u0440 \u0445\u044f\u043d\u0430"}),(0,v.jsx)(b.N_,{to:"/register",children:(0,v.jsx)(y.Q,{color:"primary",className:"mt-3",children:"\u041e\u0434\u043e\u043e \u0431\u04af\u0440\u0442\u0433\u04af\u04af\u043b\u044d\u0445"})})]})})})]})})})})})}},94590:(e,s,a)=>{a.d(s,{x:()=>o});var r=a(22378),t=a(65043),l=a(65173),c=a.n(l),n=a(25196),o=(0,t.forwardRef)((function(e,s){var a=e.children,l=e.className,c=(0,r.Tt)(e,["children","className"]);return t.createElement("div",(0,r.Cl)({className:(0,n.A)("card-group",l)},c,{ref:s}),a)}));o.propTypes={children:c().node,className:c().string},o.displayName="CCardGroup"}}]);
//# sourceMappingURL=4721.9220dbfd.chunk.js.map